<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title id="title">수목조사 · 온천공원</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/assets/style.css" />
</head>
<body>
  <main class="container">
    <h1 id="park">온천공원</h1>
    <p>수목코드: <strong id="code"></strong></p>

    <button id="goForm">현장기록 입력</button>
  </main>

  <script>
    // ===== 고정값 =====
    const  = "https://docs.google.com/forms/d/1gGJU8_ifBXOKEjuSEzPnZjvQ_mnBpHECPtf-GlAVDYM/viewform";
    const ENTRY_PARK = "entry.939121262";
    const ENTRY_CODE = "entry.253024248";
    const PARK_NAME = "온천공원";

    // ===== 수목코드 추출 (파일명 기준) =====
    const file = location.pathname.split("/").pop().replace(".html","");
    document.getElementById("code").textContent = file;
    document.getElementById("title").textContent = `${file} · 온천공원`;
    document.getElementById("park").textContent = "온천공원";

    // ===== 폼 이동 =====
    document.getElementById("goForm").onclick = () => {
      const url =
        `${}?${ENTRY_PARK}=${encodeURIComponent(PARK_NAME)}&` +
        `${ENTRY_CODE}=${encodeURIComponent(file)}`;
      window.location.href = url;
    };
  </script>
<script>
  const FORM_BASE = "https://docs.google.com/forms/d/e/1FAIpQLSdgujOIV9bKAUyOAot7AoysT4UWBrrIKkQbIgWirDtZjaapQA/viewform";
  const ENTRY_PARK = "entry.939121262";
  const ENTRY_CODE = "entry.253024248";
  const ENTRY_SPECIES = "entry.2104235715";

  function clean(v){return(v==null)?"":String(v).replace(/\s+/g," ").trim();}
  function normLabel(s){return clean(s).replace(/[:：]/g,"").replace(/\s+/g,"");}
  function codeFromFilename(){
    const f=(location.pathname.split("/").pop()||"").split("?")[0];
    return clean(f).replace(/\.html$/i,"");
  }
  function getValueFromMeta(label){
    const table=document.querySelector("table.meta");
    if(!table)return"";
    const want=normLabel(label);
    for(const row of table.querySelectorAll("tr")){
      const cells=[...row.children];
      for(let i=0;i<cells.length;i++){
        const c=cells[i];
        if(c.tagName?.toLowerCase()!=="th")continue;
        if(normLabel(c.textContent)!==want)continue;
        const td=cells[i+1];
        return td?.tagName?.toLowerCase()==="td"?clean(td.textContent):"";
      }
    }
    return "";
  }

  document.addEventListener("DOMContentLoaded",()=>{
    const PARK_NAME=getValueFromMeta("공원명")||"온천공원";
    const CODE=getValueFromMeta("수목코드")||codeFromFilename();
    const SPECIES=getValueFromMeta("수종명");

    const btn=document.getElementById("goForm");
    if(!btn)return;
    btn.addEventListener("click",(e)=>{
      e.preventDefault();
      const url=
        FORM_BASE+
        "?usp=pp_url"+
        "&"+ENTRY_PARK+"="+encodeURIComponent(PARK_NAME)+
        "&"+ENTRY_CODE+"="+encodeURIComponent(CODE)+
        "&"+ENTRY_SPECIES+"="+encodeURIComponent(SPECIES||"");
      window.location.href=url;
    });
  });
</script>

</body>
</html>